<div class="sidebar-widget trending-articles mb-4">
    <h4 class="widget-title">Trending News</h4>
    {% for article in trending_articles|slice:":5" %}
    <div class="trending-item d-flex mb-3">
        <div class="flex-shrink-0">
            <img src="{{ article.image.url }}" alt="{{ article.title }}" class="rounded" width="100">
        </div>
        <div class="flex-grow-1 ms-3">
            <h6 class="mb-1">
                <a href="{% url 'article_detail' article.slug %}" class="text-dark text-decoration-none">
                    {{ article.title }}
                </a>
            </h6>
            <small class="text-muted">
                <i class="fas fa-eye"></i> {{ article.view_count }} views
            </small>
        </div>
    </div>
    {% endfor %}
</div>

<div class="sidebar-widget recent-articles mb-4">
    <h4 class="widget-title">Recent News</h4>
    <div class="list-group">
        {% for article in recent_articles|slice:":5" %}
        <a href="{% url 'article_detail' article.slug %}" class="list-group-item list-group-item-action">
            <div class="d-flex w-100 justify-content-between">
                <h6 class="mb-1">{{ article.title }}</h6>
                <small>{{ article.created_at|timesince }}</small>
            </div>
        </a>
        {% endfor %}
    </div>
</div>

<div class="sidebar-widget categories mb-4">
    <h4 class="widget-title">Categories</h4>
    <div class="list-group">
        {% for cat in categories %}
        <a href="{% url 'category' cat.slug %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
            {{ cat.name }}
            <span class="badge bg-primary rounded-pill">{{ cat.article_set.count }}</span>
        </a>
        {% endfor %}
    </div>
</div>